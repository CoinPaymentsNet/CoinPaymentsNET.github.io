post:
  tags:
    - Wallets API
  summary: Create Withdrawal
  description: |
    Creating withdrawal is a two-step process:
    1- Send a withdrawal request: This request will trigger a response containing a preview of the transaction,
    including any applicable fees. The purpose of this step is to allow users to review and verify the information provided,
    including the amount and any associated fees before proceeding.

    2- Confirm the withdrawal: This step is pretty straightforward, the confirm withdrawal endpoint takes the "spendRequestId"
    as a URL param to identify, confirm and publish the transaction.
    Note: The "spendRequestId" included in the response from the first step.
  operationId: sendSpendRequest
  requestBody:
    content:
      application/json:
        schema:
          $ref: ../../components/schemas/wallets/SpendRequestPayload.yaml
    description: Withdrawal Request payload
    required: true
  parameters:
    - name: walletIdStr
      in: path
      required: true
      schema:
        type: string
        example: '0a54b29f-51cb-44a8-9bed-111c5cb1b335'
      description: the wallet Id from which you intend to withdraw funds
  responses:
    '200':
      description: Ok
      content:
        application/json:
          schema:
            $ref: ../../components/responses/wallets/SpendRequestConfirmationSuccess.yaml
    '400':
      description: Not enough funds
    '404':
      description: Wallet not found

